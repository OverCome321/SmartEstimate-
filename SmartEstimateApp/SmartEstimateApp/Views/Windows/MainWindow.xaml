<Window x:Class="SmartEstimateApp.Views.Windows.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:SmartEstimateApp"
        xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
        xmlns:System="clr-namespace:System;assembly=mscorlib"
        mc:Ignorable="d"
        Title="Авторизация" Height="780" Width="1000"
        WindowStartupLocation="CenterScreen"
        Background="#F1F4F8" Icon="/Resources/smart-estimate-icon-for-calculating.ico">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Заголовок с меню и пользователем -->
        <Border Grid.Row="0" Style="{StaticResource HeaderBorderStyle}">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                <StackPanel Orientation="Horizontal" Margin="20,13">
                    <materialDesign:PackIcon Kind="Calculator" 
                                             Foreground="White"
                                             Width="24" Height="24"
                                             VerticalAlignment="Center"
                                             Margin="0,0,10,0"/>
                    <TextBlock Text="Умный счетчик смет" Style="{StaticResource HeaderTextStyle}"/>
                </StackPanel>
            </Grid>
        </Border>

        <!-- Основной контент -->
        <Border Grid.Row="1" Margin="20,10,20,10" Background="White" CornerRadius="10">
            <Frame x:Name="MainFrameU" NavigationUIVisibility="Hidden"/>
        </Border>

        <!-- Индикатор загрузки -->
        <materialDesign:Card Grid.Row="1" Visibility="{Binding LoadingVisibility}"
                             Background="Transparent"
                             HorizontalAlignment="Stretch"
                             VerticalAlignment="Stretch">
            <ProgressBar Style="{StaticResource MaterialDesignCircularProgressBar}"
                         Value="0"
                         IsIndeterminate="True"
                         Width="50"
                         Height="50"
                         VerticalAlignment="Center"
                         HorizontalAlignment="Center"/>
        </materialDesign:Card>

        <!-- Строка состояния -->
        <StatusBar Grid.Row="2" x:Name="StatusBar">
            <StatusBar.Style>
                <Style TargetType="StatusBar" BasedOn="{StaticResource ModernStatusBarStyle}">
                    <Setter Property="Background" Value="White"/>
                    <Style.Triggers>
                        <DataTrigger Binding="{Binding IsErrorVisible}" Value="True">
                            <DataTrigger.EnterActions>
                                <BeginStoryboard>
                                    <Storyboard>
                                        <ColorAnimation Storyboard.TargetProperty="(StatusBar.Background).(SolidColorBrush.Color)"
                                                        To="#D32F2F" Duration="0:0:0.3"/>
                                    </Storyboard>
                                </BeginStoryboard>
                            </DataTrigger.EnterActions>
                            <DataTrigger.ExitActions>
                                <BeginStoryboard>
                                    <Storyboard>
                                        <ColorAnimation Storyboard.TargetProperty="(StatusBar.Background).(SolidColorBrush.Color)"
                                                        To="White" Duration="0:0:0.3"/>
                                    </Storyboard>
                                </BeginStoryboard>
                            </DataTrigger.ExitActions>
                        </DataTrigger>
                    </Style.Triggers>
                </Style>
            </StatusBar.Style>
            <StatusBarItem>
                <TextBlock Margin="15,0">
                    <TextBlock.Style>
                        <Style TargetType="TextBlock">
                            <Setter Property="Text" Value="Готово"/>
                            <Setter Property="Foreground" Value="Black"/>
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding IsErrorVisible}" Value="True">
                                    <Setter Property="Text" Value="{Binding ErrorMessage}"/>
                                    <Setter Property="Foreground" Value="White"/>
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </TextBlock.Style>
                </TextBlock>
            </StatusBarItem>
            <StatusBarItem HorizontalAlignment="Right" Margin="0,0,15,0">
                <TextBlock x:Name="DateTimeDisplay" Text="{Binding CurrentDateTime}">
                    <TextBlock.Style>
                        <Style TargetType="TextBlock">
                            <Setter Property="Foreground" Value="Black"/>
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding IsErrorVisible}" Value="True">
                                    <Setter Property="Foreground" Value="White"/>
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </TextBlock.Style>
                </TextBlock>
            </StatusBarItem>
        </StatusBar>
    </Grid>
</Window>